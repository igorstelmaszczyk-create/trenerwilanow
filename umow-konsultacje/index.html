<!-- ================== SITE HEADER (compact + mobile hamburger, CSS-only) ================== -->
<header id="site-header" role="banner">
  <div class="nav-wrap">
    <!-- Brand -->
    <a class="brand" href="/" aria-label="Strona główna – Igor Stelmaszczyk">
      <span class="brand-mark" aria-hidden="true">IS</span>
      <span class="brand-text">
        <strong>Igor Stelmaszczyk</strong>
        <em>Trener personalny</em>
      </span>
    </a>

    <!-- Desktop nav -->
    <nav class="nav" aria-label="Główne">
      <ul>
        <li><a href="/o-mnie">O mnie</a></li>
        <li><a href="/uslugi">Usługi</a></li>
        <li><a href="/cennik">Cennik</a></li>
        <li><a href="/efekty">Efekty</a></li>
        <li><a href="/umow-konsultacje" aria-current="page">Kontakt</a></li>
      </ul>
    </nav>

    <!-- CTA (desktop -> formularz, mobile -> WhatsApp) -->
    <div class="cta">
      <a class="hero-button btn-primary cta-desktop"
         href="#formularz"
         aria-label="Skocz do formularza – umów konsultację">
        Umów konsultację
      </a>

      <a class="hero-button btn-wa cta-mobile"
         href="https://wa.me/48537918161?text=Cze%C5%9B%C4%87%20Igor%2C%20chc%C4%99%20kr%C3%B3tkiej%20konsultacji%20na%20WhatsApp.%20Imi%C4%99%3A%20__%2C%20cel%3A%20__"
         target="_blank" rel="noopener"
         aria-label="Napisz na WhatsApp – nowa karta">
        <span class="wa-ico" aria-hidden="true">
          <svg viewBox="0 0 32 32" width="16" height="16" fill="currentColor" focusable="false" aria-hidden="true">
            <path d="M19.1 17.4c-.2-.1-1.3-.6-1.5-.7-.2-.1-.4-.1-.6.1-.2.2-.6.7-.7.8-.1.1-.3.2-.6.1-.2-.1-.9-.3-1.7-1-.6-.5-1-1.1-1.1-1.3-.1-.2 0-.4.1-.5s.5-.6.6-.8c.1-.2.1-.4 0-.5s-.6-1.4-.8-1.9-.4-.4-.6-.4h-.5c-.2 0-.5.1-.7.3-.2.2-.9.8-.9 2s1 2.4 1.1 2.6c.1.2 1.9 3 4.5 4.1.6.3 1.1.5 1.5.6.6.2 1.1.2 1.5.1.5-.1 1.3-.5 1.5-1.1.2-.6.2-1.1.1-1.2 0-.1-.2-.1-.4-.2z"/>
            <path d="M16 3C9.9 3 5 7.9 5 14c0 2.5.9 4.8 2.4 6.6L6 29l8.6-1.4c1.4.4 2.9.6 4.4.6 6.1 0 11-4.9 11-11S22.1 3 16 3zm0 20.9c-1.5 0-2.9-.4-4.1-1l-.3-.2-5 .8.9-4.8-.2-.3C6.4 17.1 6 15.6 6 14c0-5.5 4.5-10 10-10s10 4.5 10 10-4.5 9.9-10 9.9z"/>
          </svg>
        </span>
        WhatsApp
      </a>
    </div>

    <!-- Hamburger (otwiera #site-menu przez :target) -->
    <a href="#site-menu" class="nav-toggle" aria-label="Otwórz menu">
      <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </a>
  </div>
</header>

<!-- ===== Overlay menu (CSS :target) ===== -->
<nav id="site-menu" class="mobile-menu" aria-label="Menu mobilne">
  <a href="#" class="close" aria-label="Zamknij menu">✕</a>

  <a href="/o-mnie">O mnie</a>
  <a href="/uslugi">Usługi</a>
  <a href="/cennik">Cennik</a>
  <a href="/efekty">Efekty</a>
  <a href="/umow-konsultacje" aria-current="page">Kontakt</a>

  <a class="wa-link" href="https://wa.me/48537918161?text=Cze%C5%9B%C4%87%20Igor%2C%20chc%C4%99%20kr%C3%B3tkiej%20konsultacji%20na%20WhatsApp.%20Imi%C4%99%3A%20__%2C%20cel%3A%20__"
     target="_blank" rel="noopener" aria-label="Napisz na WhatsApp – nowa karta">
     <span class="wa-ico" aria-hidden="true">
       <svg viewBox="0 0 32 32" width="16" height="16" fill="currentColor" focusable="false" aria-hidden="true">
         <path d="M19.1 17.4c-.2-.1-1.3-.6-1.5-.7-.2-.1-.4-.1-.6.1-.2.2-.6.7-.7.8-.1.1-.3.2-.6.1-.2-.1-.9-.3-1.7-1-.6-.5-1-1.1-1.1-1.3-.1-.2 0-.4.1-.5s.5-.6.6-.8c.1-.2.1-.4 0-.5s-.6-1.4-.8-1.9-.4-.4-.6-.4h-.5c-.2 0-.5.1-.7.3-.2.2-.9.8-.9 2s1 2.4 1.1 2.6c.1.2 1.9 3 4.5 4.1.6.3 1.1.5 1.5.6.6.2 1.1.2 1.5.1.5-.1 1.3-.5 1.5-1.1.2-.6.2-1.1.1-1.2 0-.1-.2-.1-.4-.2z"/>
         <path d="M16 3C9.9 3 5 7.9 5 14c0 2.5.9 4.8 2.4 6.6L6 29l8.6-1.4c1.4.4 2.9.6 4.4.6 6.1 0 11-4.9 11-11S22.1 3 16 3zm0 20.9c-1.5 0-2.9-.4-4.1-1l-.3-.2-5 .8.9-4.8-.2-.3C6.4 17.1 6 15.6 6 14c0-5.5 4.5-10 10-10s10 4.5 10 10-4.5 9.9-10 9.9z"/>
       </svg>
     </span>
     Napisz na WhatsApp
  </a>
</nav>
<a href="#" class="menu-backdrop" aria-hidden="true"></a>

<style>
  /* ================== Header ================== */
  #site-header{
    position:sticky; top:0; z-index:9999;
    min-height:56px; background:#fff;
    border-bottom:1px solid rgba(0,0,0,.06);
    -webkit-font-smoothing:antialiased;
    transition:box-shadow .2s, border-color .2s, background .2s;
  }
  @supports (backdrop-filter: blur(4px)){
    #site-header{ background:#ffffffcc; backdrop-filter:saturate(1.2) blur(4px); }
  }
  @media (max-width:900px){
    #site-header{ background:#fff; backdrop-filter:none; -webkit-backdrop-filter:none; }
  }
  #site-header .nav-wrap{
    max-width:1100px; margin:0 auto; padding:8px 16px;
    display:flex; align-items:center; gap:14px;
  }
  #site-header .brand{ display:flex; align-items:center; gap:8px; text-decoration:none; color:#1a1a1a; }
  #site-header .brand-mark{
    width:28px; height:28px; border-radius:50%;
    background:#2e9b2f; color:#fff; display:inline-flex; align-items:center; justify-content:center;
    font-family:'Poppins',sans-serif; font-weight:700; font-size:.85rem;
  }
  #site-header .brand-text{ display:flex; flex-direction:column; line-height:1.05; }
  #site-header .brand-text strong{ font-family:'Poppins',sans-serif; font-size:.98rem; font-size-adjust:.52; }
  #site-header .brand-text em{ font-style:normal; color:#555; font-size:.78rem; }
  #site-header .nav{ margin-left:auto; }
  #site-header .nav ul{ display:flex; gap:14px; list-style:none; margin:0; padding:0; }
  #site-header .nav a{
    text-decoration:none; color:#1a1a1a; font-weight:700; font-size:.95rem;
    padding:6px 4px; border-radius:8px; position:relative;
  }
  #site-header .nav a:hover{ color:#2e9b2f; }
  #site-header .nav a[aria-current="page"]{ color:#2e9b2f; }
  #site-header .nav a[aria-current="page"]::after{
    content:""; position:absolute; left:6px; right:6px; bottom:0;
    height:2px; background:#2e9b2f; border-radius:2px;
  }
  #site-header .hero-button{
    display:inline-flex; align-items:center; justify-content:center;
    font-family:'Open Sans',sans-serif; font-weight:700; font-size:.95rem; line-height:1;
    padding:10px 14px; min-height:40px; border-radius:10px; border:2px solid;
    text-decoration:none; white-space:nowrap; box-sizing:border-box;
    transition:background-color .25s, border-color .25s, color .25s;
  }
  #site-header .btn-primary{ background:#2e9b2f; color:#fff; border-color:#2e9b2f; }
  #site-header .btn-primary:hover{ background:#1f7e21; border-color:#1f7e21; }
  #site-header .btn-wa{ background:transparent; color:#2e9b2f; border-color:#2e9b2f; }
  #site-header .btn-wa:hover{ background:#2e9b2f; color:#fff; }
  #site-header .wa-ico{ display:inline-flex; margin-right:6px; }
  #site-header .cta{ display:flex; gap:8px; margin-left:6px; }
  #site-header .cta-desktop{ display:inline-flex; }
  #site-header .cta-mobile{ display:none; }
  #site-header .nav-toggle{ margin-left:6px; padding:6px; border-radius:8px; display:none; cursor:pointer; }
  #site-header .nav-toggle .bar{ display:block; width:20px; height:2px; background:#1a1a1a; margin:3px 0; }

  /* ================== Mobile overlay menu ================== */
  .mobile-menu{
    position:fixed; left:12px; right:12px; top:52px; z-index:10000;
    background:#fff; border:1px solid #eee; border-radius:14px;
    box-shadow:0 14px 34px rgba(0,0,0,.12);
    padding:12px; display:block; opacity:0; transform:translateY(-6px);
    pointer-events:none; visibility:hidden;
    transition:opacity .18s ease, transform .18s ease, visibility 0s linear .18s;
    contain: layout paint style; 
  }
  .mobile-menu a{ display:block; padding:12px; border-radius:10px; text-decoration:none; color:#1a1a1a; font-weight:700; }
  .mobile-menu a:hover{ background:#f6fbf6; color:#2e9b2f; }
  .mobile-menu .close{ text-align:right; font-size:1.1rem; padding:8px 10px; }
  .mobile-menu .wa-link{ margin-top:4px; border:2px solid #2e9b2f; color:#2e9b2f; text-align:center; }
  .mobile-menu .wa-link:hover{ background:#2e9b2f; color:#fff; }
  .menu-backdrop{ position:fixed; inset:0; z-index:9998; display:none; background:transparent; }
  .mobile-menu:target{ opacity:1; transform:translateY(0); pointer-events:auto; visibility:visible; transition-delay:0s; }
  #site-menu:target + .menu-backdrop{ display:block; }
  html:has(#site-menu:target){ overflow:hidden; }

  /* Responsywność */
  @media (max-width:900px){
    #site-header .nav{ display:none !important; }
    #site-header .nav-toggle{ display:inline-block !important; }
    #site-header .cta-desktop{ display:none !important; }
    #site-header .cta-mobile{ display:inline-flex !important; }
  }
  @media (max-width:360px){
    #site-header .brand-text strong{ font-size:.95rem; }
    #site-header .brand-text em{ font-size:.76rem; }
    #site-header .hero-button{ padding:9px 12px; min-height:38px; font-size:.92rem; }
  }
  #site-header a:focus-visible, .mobile-menu a:focus-visible{ outline:3px solid #2e9b2f; outline-offset:2px; }
  #formularz { scroll-margin-top: 90px; }

  @media (prefers-reduced-motion: reduce){
    *{ transition:none !important; }
  }
</style>

<!-- === WhatsApp (floating FAB) === -->
<style>
@keyframes pulse { 0%,100%{transform:scale(1)} 50%{transform:scale(1.08)} }
#whatsapp-fixed{
  position:fixed; bottom:20px; right:20px; z-index:9999;
  width:58px; height:58px; border-radius:50%;
  background:#25D366; color:#fff; display:flex; align-items:center; justify-content:center;
  text-decoration:none; box-shadow:0 8px 20px rgba(0,0,0,.25);
  animation:pulse 2s infinite; line-height:0;
}
#whatsapp-fixed svg{ width:28px; height:28px; fill:#fff; display:inline-block; }
#whatsapp-fixed:focus-visible{ outline:3px solid #1f7e21; outline-offset:2px; }
@media (min-width:769px){ #whatsapp-fixed{ display:none; } }
@media (prefers-reduced-motion: reduce){ #whatsapp-fixed{ animation:none; } }
</style>

<a id="whatsapp-fixed"
   href="https://wa.me/48537918161?text=Cze%C5%9B%C4%87!%20Chc%C4%99%20um%C3%B3wi%C4%87%20bezp%C5%82atn%C4%85%20konsultacj%C4%99%20treningow%C4%85"
   target="_blank" rel="noopener"
   title="Napisz na WhatsApp" aria-label="Napisz na WhatsApp">
  <svg viewBox="0 0 32 32" aria-hidden="true" focusable="false">
    <path d="M19.1 17.4c-.2-.1-1.3-.6-1.5-.7-.2-.1-.4-.1-.6.1-.2.2-.6.7-.7.8-.1.1-.3.2-.6.1-.2-.1-.9-.3-1.7-1-.6-.5-1-1.1-1.1-1.3-.1-.2 0-.4.1-.5s.5-.6.6-.8c.1-.2.1-.4 0-.5s-.6-1.4-.8-1.9-.4-.4-.6-.4h-.5c-.2 0-.5.1-.7.3-.2.2-.9.8-.9 2s1 2.4 1.1 2.6c.1.2 1.9 3 4.5 4.1.6.3 1.1.5 1.5.6.6.2 1.1.2 1.5.1.5-.1 1.3-.5 1.5-1.1.2-.6.2-1.1.1-1.2 0-.1-.2-.1-.4-.2z"/>
    <path d="M16 3C9.9 3 5 7.9 5 14c0 2.5.9 4.8 2.4 6.6L6 29l8.6-1.4c1.4.4 2.9.6 4.4.6 6.1 0 11-4.9 11-11S22.1 3 16 3zm0 20.9c-1.5 0-2.9-.4-4.1-1l-.3-.2-5 .8.9-4.8-.2-.3C6.4 17.1 6 15.6 6 14c0-5.5 4.5-10 10-10s10 4.5 10 10-4.5 9.9-10 9.9z"/>
  </svg>
</a>

<!-- ================== UMÓW KONSULTACJĘ — PODSTRONA ================== -->
<section id="booking-page" style="padding:56px 20px; font-family:'Open Sans',sans-serif;">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&family=Poppins:wght@600;700&display=swap');
    #booking-page{-webkit-font-smoothing:antialiased;}
    #booking-page .wrap{max-width:1100px;margin:0 auto;}

    /* Hero */
    #booking-page .hero h1{
      margin:0 0 8px; text-align:center; font-family:'Poppins',sans-serif;
      font-weight:700; font-size:2.2rem; line-height:1.2;
    }
    #booking-page .hero p{margin:0; text-align:center; color:#444; font-size:1.05rem;}
    #booking-page .chips{display:flex; gap:8px; flex-wrap:wrap; justify-content:center; margin:12px 0 0; padding:0; list-style:none;}
    #booking-page .chips li{padding:6px 10px; border-radius:999px; background:#f0f7f0; color:#1c371d; font-weight:700; font-size:.88rem; border:1px solid #d9ead9;}

    /* Karty: Formularz + Szybki kontakt */
    #booking-page .grid{
      display:grid; grid-template-columns:2fr 1fr; gap:18px; margin-top:18px;
    }
    #booking-page .card{
      background:#fff; border:1px solid #e6efe6; border-radius:16px; box-shadow:0 8px 20px rgba(0,0,0,.06); padding:18px;
    }
    #booking-page .card h2{
      margin:0 0 10px; font-family:'Poppins',sans-serif; font-size:1.25rem; font-weight:700;
    }

    /* Formularz */
    #booking-page form{display:grid; gap:12px;}
    #booking-page .row{display:grid; grid-template-columns:1fr 1fr; gap:12px;}
    #booking-page label{font-weight:700; color:#1a1a1a; display:block; margin-bottom:6px;}
    #booking-page input, #booking-page select, #booking-page textarea{
      width:100%; box-sizing:border-box; border:1.5px solid #dfe8e0; border-radius:10px; padding:12px 12px;
      font:inherit; color:#1a1a1a; background:#fff; transition:border-color .2s, box-shadow .2s;
    }
    #booking-page input:focus, #booking-page select:focus, #booking-page textarea:focus{
      outline:none; border-color:#2e9b2f; box-shadow:0 0 0 3px rgba(46,155,47,.15);
    }
    #booking-page .hint{color:#6b6b6b; font-size:.92rem; margin-top:4px;}
    #booking-page .actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:6px;}
    #booking-page .btn{display:inline-flex; align-items:center; justify-content:center; font-weight:700; border:2px solid; border-radius:10px; padding:12px 16px; cursor:pointer; text-decoration:none;}
    #booking-page .btn-primary{background:#2e9b2f; color:#fff; border-color:#2e9b2f;}
    #booking-page .btn-primary:hover{background:#1f7e21; border-color:#1f7e21;}
    #booking-page .btn-outline{background:transparent; color:#2e9b2f; border-color:#2e9b2f;}
    #booking-page .btn-outline:hover{background:#2e9b2f; color:#fff;}
    #booking-page .btn[disabled]{opacity:.65; cursor:not-allowed;}

    /* Alerty */
    #booking-page .alert{display:none; border-radius:10px; padding:12px; font-weight:700;}
    #booking-page .alert.show{display:block;}
    #booking-page .alert-ok{background:#f0fbf0; border:1px solid #cfe9d0; color:#1c371d;}
    #booking-page .alert-err{background:#fff6f6; border:1px solid #f3c2c2; color:#7a0c0c;}

    /* Szybki kontakt */
    #booking-page .quick li{display:flex; gap:10px; align-items:center;}
    #booking-page .quick li + li{margin-top:8px;}
    #booking-page .quick a{color:#2e9b2f; font-weight:700; text-decoration:none;}
    #booking-page .quick a:hover{text-decoration:underline;}

    /* RWD */
    @media (max-width:900px){
      #booking-page .grid{grid-template-columns:1fr;}
      #booking-page .row{grid-template-columns:1fr;}
    }
  </style>

  <div class="wrap">
    <!-- HERO -->
    <header class="hero">
      <h1>Umów konsultację</h1>
      <p>Bez presji sprzedażowej. 10–15 minut, ustalimy cel i najprostszy plan startu.</p>
      <ul class="chips" aria-label="Najważniejsze informacje">
        <li>Zdrofit Wilanów</li>
        <li>WhatsApp lub telefon</li>
        <li>Odpowiedź tego samego dnia</li>
      </ul>
    </header>

    <!-- GRID -->
    <div class="grid">
      <!-- FORMULARZ -->
      <article class="card" id="formularz" aria-labelledby="form-ttl">
        <h2 id="form-ttl">Formularz kontaktowy</h2>

        <div id="form-alert-ok" class="alert alert-ok" role="status" aria-live="polite">Dzięki! Odpowiem tego samego dnia.</div>
        <div id="form-alert-err" class="alert alert-err" role="alert">Ups! Sprawdź pola poniżej i spróbuj ponownie.</div>

        <form id="consult-form" novalidate>
          <!-- honeypot anty-spam -->
          <input type="text" name="company" id="company" autocomplete="off" tabindex="-1" aria-hidden="true" style="position:absolute; left:-9999px; width:1px; height:1px; opacity:0;">

          <div class="row">
            <div>
              <label for="name">Imię i nazwisko *</label>
              <input id="name" name="name" type="text" required autocomplete="name" inputmode="text" placeholder="Jan Kowalski">
            </div>
            <div>
              <label for="phone">Telefon *</label>
              <input id="phone" name="phone" type="tel" required autocomplete="tel" inputmode="tel" placeholder="+48 5.. .. .. .." pattern="^[0-9+\-\s()]{7,}$">
              <div class="hint">Oddzwonię lub napiszę na WhatsApp.</div>
            </div>
          </div>

          <div class="row">
            <div>
              <label for="email">E-mail</label>
              <input id="email" name="email" type="email" autocomplete="email" placeholder="twoj@email.pl">
            </div>
            <div>
              <label for="pref">Preferowane dni/godziny</label>
              <select id="pref" name="pref">
                <option value="">Wybierz… (opcjonalnie)</option>
                <option>Poranek (6–10)</option>
                <option>Południe (10–15)</option>
                <option>Popołudnie (15–18)</option>
                <option>Wieczór (18–21)</option>
              </select>
            </div>
          </div>

          <div>
            <label for="goal">Cel / krótki opis *</label>
            <textarea id="goal" name="goal" rows="4" required placeholder="Np. redukcja wagi, wzmocnienie pleców, powrót po przerwie…"></textarea>
          </div>

          <div>
            <label for="location">Lokalizacja</label>
            <input id="location" name="location" type="text" value="Zdrofit Wilanów (Warszawa)" readonly>
          </div>

          <div>
            <label class="checkbox">
              <input type="checkbox" id="consent" required>
              <span>Wyrażam zgodę na kontakt telefoniczny lub mailowy w sprawie konsultacji.</span>
            </label>
          </div>

          <div class="actions">
            <button type="submit" class="btn btn-primary" id="submit-btn">Wyślij formularz</button>
            <a href="#" class="btn btn-outline" id="wa-btn">Napisz na WhatsApp</a>
          </div>

          <p class="hint" style="margin-top:2px;">Wypełnij pola i kliknij „WhatsApp”, a wiadomość uzupełni się automatycznie.</p>
        </form>
      </article>

      <!-- SZYBKI KONTAKT / MINI-FAQ -->
      <aside class="card" aria-labelledby="quick-ttl">
        <h2 id="quick-ttl">Szybki kontakt</h2>
        <ul class="quick" style="list-style:none; padding:0; margin:0 0 12px;">
          <li>📞 <a href="tel:+48537918161" aria-label="Zadzwoń: +48 537 918 161">+48&nbsp;537&nbsp;918&nbsp;161</a></li>
          <li>💬 <a id="quick-wa" href="https://wa.me/48537918161?text=Cze%C5%9B%C4%87%20Igor%2C%20chc%C4%99%20kr%C3%B3tkiej%20konsultacji." target="_blank" rel="noopener">WhatsApp (kliknij)</a></li>
          <li>✉️ <a href="mailto:treningi.wilanow@gmail.com?subject=Konsultacja%20treningowa%20-%20trenerwilanow.pl">treningi.wilanow@gmail.com</a></li>
        </ul>

        <details>
          <summary style="font-weight:700; cursor:pointer;">Jak wygląda rozmowa?</summary>
          <p class="hint">Krótko: cel, zdrowie, terminy. Jeśli pasuje — wpisuję Cię w grafik i ustalamy pierwsze spotkanie.</p>
        </details>
        <details>
          <summary style="font-weight:700; cursor:pointer;">Czy to coś kosztuje?</summary>
          <p class="hint">Nie. Konsultacja jest bezpłatna.</p>
        </details>
      </aside>
    </div>
  </div>

  <!-- JSON-LD: ContactPage + potencjalne akcje -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"ContactPage",
    "name":"Umów konsultację – Igor Stelmaszczyk, trener personalny Wilanów",
    "url":"https://trenerwilanow.pl/umow-konsultacje",
    "about":{"@type":"Person","name":"Igor Stelmaszczyk"},
    "contactPoint":{
      "@type":"ContactPoint",
      "contactType":"customer support",
      "areaServed":"Wilanów, Warszawa, PL",
      "telephone":"+48 537 918 161",
      "email":"treningi.wilanow@gmail.com",
      "availableLanguage":["pl"]
    },
    "potentialAction":{
      "@type":"CommunicateAction",
      "target":{
        "@type":"EntryPoint",
        "urlTemplate":"https://wa.me/48537918161?text={message}",
        "actionPlatform":[
          "http://schema.org/AndroidPlatform",
          "http://schema.org/IOSPlatform",
          "http://schema.org/MobileWebPlatform"
        ]
      }
    }
  }
  </script>

  <!-- Skrypt: walidacja, mailto fallback, WhatsApp z auto-uzupełnieniem -->
  <script>
  (function(){
    var f = document.getElementById('consult-form');
    var ok = document.getElementById('form-alert-ok');
    var er = document.getElementById('form-alert-err');
    var btn = document.getElementById('submit-btn');
    var waBtn = document.getElementById('wa-btn');
    var quickWa = document.getElementById('quick-wa');

    function val(id){ return (document.getElementById(id).value || '').trim(); }
    function enc(s){ return encodeURIComponent(s); }
    function buildMsg(){
      return (
        "Cześć Igor! Chcę krótką konsultację.%0A" +
        "Imię: " + enc(val('name')) + "%0A" +
        "Telefon: " + enc(val('phone')) + "%0A" +
        (val('email') ? "E-mail: " + enc(val('email')) + "%0A" : "") +
        (val('pref') ? "Preferowane terminy: " + enc(val('pref')) + "%0A" : "") +
        "Cel: " + enc(val('goal')) + "%0A" +
        "Lokalizacja: Zdrofit Wilanów"
      );
    }

    function show(el){ el.classList.add('show'); }
    function hide(el){ el.classList.remove('show'); }

    waBtn.addEventListener('click', function(e){
      e.preventDefault();
      var url = "https://wa.me/48537918161?text=" + buildMsg();
      window.open(url, '_blank', 'noopener');
    });

    if(quickWa){
      quickWa.addEventListener('click', function(e){
        // uzupełnij, jeśli wypełniono formularz
        if(val('name') || val('goal') || val('phone')){
          e.preventDefault();
          window.open("https://wa.me/48537918161?text=" + buildMsg(), '_blank', 'noopener');
        }
      });
    }

    f.addEventListener('submit', function(e){
      e.preventDefault();
      hide(ok); hide(er);

      // podstawowa walidacja bezpieczna i szybka
      var bad = [];
      if(val('company')) bad.push('company'); // honeypot
      if(!val('name')) bad.push('name');
      if(!val('phone')) bad.push('phone');
      if(!val('goal')) bad.push('goal');
      if(!document.getElementById('consent').checked) bad.push('consent');

      // zaznacz błędne
      ['name','phone','email','pref','goal','consent'].forEach(function(id){
        var el = document.getElementById(id);
        if(!el) return;
        el.style.borderColor = bad.includes(id) ? '#cc3b3b' : '#dfe8e0';
      });

      if(bad.length){
        show(er);
        return;
      }

      // MAILTO fallback – działa bez backendu
      var subject = "Konsultacja treningowa – trenerwilanow.pl (" + val('name') + ")";
      var body =
        "Imię i nazwisko: " + val('name') + "%0D%0A" +
        "Telefon: " + val('phone') + "%0D%0A" +
        (val('email') ? "E-mail: " + val('email') + "%0D%0A" : "") +
        (val('pref') ? "Preferowane terminy: " + val('pref') + "%0D%0A" : "") +
        "Cel/opis: " + val('goal') + "%0D%0A" +
        "Lokalizacja: Zdrofit Wilanów";

      // Otwórz domyślny klient poczty
      window.location.href = "mailto:treningi.wilanow@gmail.com?subject=" + encodeURIComponent(subject) + "&body=" + body;

      // Pokaż komunikat i zablokuj ponowne klikanie
      show(ok);
      btn.disabled = true;
      setTimeout(function(){ btn.disabled = false; }, 6000);
      f.reset();
    });
  })();
  </script>
</section>

<!-- SEKCJA: STOPKA-->
<footer id="ig-footer" role="contentinfo" aria-label="Stopka strony">
  <div class="wrap">
    <div class="col about">
      <h3>Igor Stelmaszczyk</h3>
      <p>Trener personalny w Wilanowie. Bez zadęcia, bez stresu — z planem, który działa.</p>
      <div class="cta-row">
        <a class="btn btn-call" href="tel:+48537918161" aria-label="Zadzwoń do mnie: +48 537 918 161">Zadzwoń</a>
        <a class="btn btn-wa" href="https://wa.me/48537918161?text=Cze%C5%9B%C4%87%2C%20chc%C4%99%20um%C3%B3wi%C4%87%20bezp%C5%82atn%C4%85%20konsultacj%C4%99.%20Termin%3A%20__%2C%20godz.%3A%20__"
           aria-label="Napisz na WhatsApp" target="_blank" rel="noopener">WhatsApp</a>
      </div>
    </div>

    <div class="col contact">
      <h4>Kontakt</h4>
      <address>
        <a href="mailto:treningi.wilanow@gmail.com" aria-label="Wyślij e-mail: treningi.wilanow@gmail.com">treningi.wilanow@gmail.com</a><br>
        <a href="tel:+48537918161" aria-label="Zadzwoń: +48 537 918 161">+48&nbsp;537&nbsp;918&nbsp;161</a>
      </address>

      <h4>Lokalizacja</h4>
      <p>
        Trenuję w: <strong>Zdrofit Wilanów</strong><br>
        <a class="map-link" href="https://www.google.com/maps/search/?api=1&query=Zdrofit%20Wilan%C3%B3w%20Warszawa" target="_blank" rel="noopener">Pokaż na mapie →</a>
      </p>
    </div>

    <nav class="col links" aria-label="Szybkie linki">
      <h4>Na skróty</h4>
      <ul class="list">
        <li><a href="/cennik">Cennik</a></li>
        <li><a href="/o-mnie">O mnie</a></li>
        <li><a href="/uslugi#coop-sec">Jak wygląda współpraca</a></li>
        <li><a href="/umow-konsultacje" aria-current="page">Kontakt</a></li>
      </ul>
    </nav>

    <div class="col policies">
      <h4>Informacje</h4>
      <ul class="list">
        <li><a href="/polityka-prywatnosci">Polityka prywatności</a></li>
        <li><a href="/regulamin">Regulamin</a></li>
      </ul>
      <p class="note">Odpowiadam tego samego dnia.</p>
    </div>
  </div>

  <div class="bar">
    <p>© 2025 Igor Stelmaszczyk • Wszystkie prawa zastrzeżone</p>
  </div>

  <style>
    #ig-footer{ background:#0f1111; color:#e9ecef; font-family:'Open Sans',sans-serif; }
    #ig-footer .wrap{
      max-width:1100px; margin:0 auto; padding:32px 20px;
      display:grid; gap:24px; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }
    #ig-footer h3, #ig-footer h4{
      font-family:'Poppins',sans-serif; letter-spacing:-.2px; margin:0 0 10px; line-height:1.2; color:#fff;
    }
    #ig-footer h3{ font-size:1.22rem; } #ig-footer h4{ font-size:1rem; }
    #ig-footer p{ margin:0 0 10px; color:#cfd6dc; }
    #ig-footer address{ font-style:normal; color:#cfd6dc; line-height:1.7; margin-bottom:6px; }
    #ig-footer .note{ font-size:.9rem; opacity:.9; }
    #ig-footer .list{ list-style:none; margin:0; padding:0; } #ig-footer .list li + li{ margin-top:6px; }
    #ig-footer a{ color:#d9fff0; text-decoration:none; }
    #ig-footer a:hover, #ig-footer a:focus{ text-decoration:underline; outline:none; }
    #ig-footer .map-link{ color:#b9f6ca; }
    #ig-footer .cta-row{ display:flex; gap:10px; margin-top:12px; flex-wrap:wrap; }
    #ig-footer .btn{
      display:inline-block; padding:10px 14px; border-radius:10px; font-weight:700; text-decoration:none; line-height:1;
      border:2px solid transparent; transition:background-color .2s ease, border-color .2s ease, color .2s ease;
    }
    #ig-footer .btn-call{ background:#1a1a1a; color:#fff; border-color:#1a1a1a; }
    #ig-footer .btn-call:hover{ background:#101010; }
    #ig-footer .btn-wa{ background:#2e9b2f; color:#fff; border-color:#2e9b2f; }
    #ig-footer .btn-wa:hover{ background:#1f7e21; }
    #ig-footer .bar{ border-top:1px solid rgba(255,255,255,.08); margin-top:6px; padding:14px 20px; text-align:center; font-size:.95rem; color:#cfd6dc; }
    @media (max-width:480px){ #ig-footer .wrap{ padding:24px 16px; } #ig-footer .cta-row a{ flex:1; text-align:center; } }
    @media (prefers-reduced-motion: reduce){ #ig-footer *{ transition:none !important; } }
  </style>
</footer>
